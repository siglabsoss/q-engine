
#include "xbaseband.h"
#include "vmem.h"
#include "csr_control.h"
#include "bootloader.h"
#include "pass_fail.h"

// #define LOAD_FFT_CFG
// #include "vmem_cfg.h"
#include "config_word_cmul_rx4_0f.h"
#include "config_word_cmul_rx4_00.h"
#include "config_word_cmul_eq_0f.h"
#include "config_word_conj_eq_0f.h"
#include "config_word_add_eq_00.h"
#include "config_word_sub_eq_00.h"
#include "config_word_magsquare_eq_00.h"


#include "ringbus2_pre.h"
#define OUR_RING_ENUM RING_ENUM_ETH
#include "ringbus2_post.h"

#define VECTOR_REPORT_ADDRESS 0x3800
#define CP_LENGTH 256

VMEM_SECTION unsigned int bank_address_1[16] = {0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3};
VMEM_SECTION unsigned int all_one[16] = {0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400, 0x00000400};

// the first example
VMEM_SECTION unsigned int exp_data[1024] = {0x00000400, 0xfffa0400, 0xfff30400, 0xffed0400, 0xffe70400, 0xffe10400, 0xffda03ff, 0xffd403ff, 0xffce03ff, 0xffc703fe, 0xffc103fe, 0xffbb03fe, 0xffb503fd, 0xffae03fd, 0xffa803fc, 0xffa203fc, 0xff9c03fb, 0xff9503fa, 0xff8f03fa, 0xff8903f9, 0xff8303f8, 0xff7c03f8, 0xff7603f7, 0xff7003f6, 0xff6a03f5, 0xff6403f4, 0xff5d03f3, 0xff5703f2, 0xff5103f1, 0xff4b03f0, 0xff4503ef, 0xff3e03ee, 0xff3803ec, 0xff3203eb, 0xff2c03ea, 0xff2603e8, 0xff2003e7, 0xff1a03e6, 0xff1303e4, 0xff0d03e3, 0xff0703e1, 0xff0103e0, 0xfefb03de, 0xfef503dd, 0xfeef03db, 0xfee903d9, 0xfee303d7, 0xfedd03d6, 0xfed703d4, 0xfed103d2, 0xfecb03d0, 0xfec503ce, 0xfebf03cc, 0xfeb903ca, 0xfeb303c8, 0xfead03c6, 0xfea703c4, 0xfea103c2, 0xfe9b03c0, 0xfe9503be, 0xfe8f03bb, 0xfe8a03b9, 0xfe8403b7, 0xfe7e03b4, 0xfe7803b2, 0xfe7203b0, 0xfe6d03ad, 0xfe6703ab, 0xfe6103a8, 0xfe5b03a6, 0xfe5603a3, 0xfe5003a0, 0xfe4a039e, 0xfe45039b, 0xfe3f0398, 0xfe390395, 0xfe340393, 0xfe2e0390, 0xfe28038d, 0xfe23038a, 0xfe1d0387, 0xfe180384, 0xfe120381, 0xfe0d037e, 0xfe07037b, 0xfe020378, 0xfdfc0375, 0xfdf70372, 0xfdf2036e, 0xfdec036b, 0xfde70368, 0xfde10364, 0xfddc0361, 0xfdd7035e, 0xfdd2035a, 0xfdcc0357, 0xfdc70353, 0xfdc20350, 0xfdbd034c, 0xfdb80349, 0xfdb20345, 0xfdad0342, 0xfda8033e, 0xfda3033a, 0xfd9e0336, 0xfd990333, 0xfd94032f, 0xfd8f032b, 0xfd8a0327, 0xfd850323, 0xfd80031f, 0xfd7b031c, 0xfd760318, 0xfd720314, 0xfd6d0310, 0xfd68030b, 0xfd630307, 0xfd5e0303, 0xfd5a02ff, 0xfd5502fb, 0xfd5002f7, 0xfd4c02f3, 0xfd4702ee, 0xfd4202ea, 0xfd3e02e6, 0xfd3902e1, 0xfd3502dd, 0xfd3002d9, 0xfd2c02d4, 0xfd2702d0, 0xfd2302cb, 0xfd1f02c7, 0xfd1a02c2, 0xfd1602be, 0xfd1202b9, 0xfd0d02b4, 0xfd0902b0, 0xfd0502ab, 0xfd0102a6, 0xfcfd02a2, 0xfcf9029d, 0xfcf50298, 0xfcf00293, 0xfcec028e, 0xfce8028a, 0xfce40285, 0xfce10280, 0xfcdd027b, 0xfcd90276, 0xfcd50271, 0xfcd1026c, 0xfccd0267, 0xfcca0262, 0xfcc6025d, 0xfcc20258, 0xfcbe0253, 0xfcbb024e, 0xfcb70248, 0xfcb40243, 0xfcb0023e, 0xfcad0239, 0xfca90234, 0xfca6022e, 0xfca20229, 0xfc9f0224, 0xfc9c021f, 0xfc980219, 0xfc950214, 0xfc92020e, 0xfc8e0209, 0xfc8b0204, 0xfc8801fe, 0xfc8501f9, 0xfc8201f3, 0xfc7f01ee, 0xfc7c01e8, 0xfc7901e3, 0xfc7601dd, 0xfc7301d8, 0xfc7001d2, 0xfc6d01cc, 0xfc6b01c7, 0xfc6801c1, 0xfc6501bb, 0xfc6201b6, 0xfc6001b0, 0xfc5d01aa, 0xfc5a01a5, 0xfc58019f, 0xfc550199, 0xfc530193, 0xfc50018e, 0xfc4e0188, 0xfc4c0182, 0xfc49017c, 0xfc470176, 0xfc450171, 0xfc42016b, 0xfc400165, 0xfc3e015f, 0xfc3c0159, 0xfc3a0153, 0xfc38014d, 0xfc360147, 0xfc340141, 0xfc32013b, 0xfc300135, 0xfc2e012f, 0xfc2c0129, 0xfc2a0123, 0xfc29011d, 0xfc270117, 0xfc250111, 0xfc23010b, 0xfc220105, 0xfc2000ff, 0xfc1f00f9, 0xfc1d00f3, 0xfc1c00ed, 0xfc1a00e6, 0xfc1900e0, 0xfc1800da, 0xfc1600d4, 0xfc1500ce, 0xfc1400c8, 0xfc1200c2, 0xfc1100bb, 0xfc1000b5, 0xfc0f00af, 0xfc0e00a9, 0xfc0d00a3, 0xfc0c009c, 0xfc0b0096, 0xfc0a0090, 0xfc09008a, 0xfc080084, 0xfc08007d, 0xfc070077, 0xfc060071, 0xfc06006b, 0xfc050064, 0xfc04005e, 0xfc040058, 0xfc030052, 0xfc03004b, 0xfc020045, 0xfc02003f, 0xfc020039, 0xfc010032, 0xfc01002c, 0xfc010026, 0xfc00001f, 0xfc000019, 0xfc000013, 0xfc00000d, 0xfc000006, 0xfc000000, 0xfc00fffa, 0xfc00fff3, 0xfc00ffed, 0xfc00ffe7, 0xfc00ffe1, 0xfc01ffda, 0xfc01ffd4, 0xfc01ffce, 0xfc02ffc7, 0xfc02ffc1, 0xfc02ffbb, 0xfc03ffb5, 0xfc03ffae, 0xfc04ffa8, 0xfc04ffa2, 0xfc05ff9c, 0xfc06ff95, 0xfc06ff8f, 0xfc07ff89, 0xfc08ff83, 0xfc08ff7c, 0xfc09ff76, 0xfc0aff70, 0xfc0bff6a, 0xfc0cff64, 0xfc0dff5d, 0xfc0eff57, 0xfc0fff51, 0xfc10ff4b, 0xfc11ff45, 0xfc12ff3e, 0xfc14ff38, 0xfc15ff32, 0xfc16ff2c, 0xfc18ff26, 0xfc19ff20, 0xfc1aff1a, 0xfc1cff13, 0xfc1dff0d, 0xfc1fff07, 0xfc20ff01, 0xfc22fefb, 0xfc23fef5, 0xfc25feef, 0xfc27fee9, 0xfc29fee3, 0xfc2afedd, 0xfc2cfed7, 0xfc2efed1, 0xfc30fecb, 0xfc32fec5, 0xfc34febf, 0xfc36feb9, 0xfc38feb3, 0xfc3afead, 0xfc3cfea7, 0xfc3efea1, 0xfc40fe9b, 0xfc42fe95, 0xfc45fe8f, 0xfc47fe8a, 0xfc49fe84, 0xfc4cfe7e, 0xfc4efe78, 0xfc50fe72, 0xfc53fe6d, 0xfc55fe67, 0xfc58fe61, 0xfc5afe5b, 0xfc5dfe56, 0xfc60fe50, 0xfc62fe4a, 0xfc65fe45, 0xfc68fe3f, 0xfc6bfe39, 0xfc6dfe34, 0xfc70fe2e, 0xfc73fe28, 0xfc76fe23, 0xfc79fe1d, 0xfc7cfe18, 0xfc7ffe12, 0xfc82fe0d, 0xfc85fe07, 0xfc88fe02, 0xfc8bfdfc, 0xfc8efdf7, 0xfc92fdf2, 0xfc95fdec, 0xfc98fde7, 0xfc9cfde1, 0xfc9ffddc, 0xfca2fdd7, 0xfca6fdd2, 0xfca9fdcc, 0xfcadfdc7, 0xfcb0fdc2, 0xfcb4fdbd, 0xfcb7fdb8, 0xfcbbfdb2, 0xfcbefdad, 0xfcc2fda8, 0xfcc6fda3, 0xfccafd9e, 0xfccdfd99, 0xfcd1fd94, 0xfcd5fd8f, 0xfcd9fd8a, 0xfcddfd85, 0xfce1fd80, 0xfce4fd7b, 0xfce8fd76, 0xfcecfd72, 0xfcf0fd6d, 0xfcf5fd68, 0xfcf9fd63, 0xfcfdfd5e, 0xfd01fd5a, 0xfd05fd55, 0xfd09fd50, 0xfd0dfd4c, 0xfd12fd47, 0xfd16fd42, 0xfd1afd3e, 0xfd1ffd39, 0xfd23fd35, 0xfd27fd30, 0xfd2cfd2c, 0xfd30fd27, 0xfd35fd23, 0xfd39fd1f, 0xfd3efd1a, 0xfd42fd16, 0xfd47fd12, 0xfd4cfd0d, 0xfd50fd09, 0xfd55fd05, 0xfd5afd01, 0xfd5efcfd, 0xfd63fcf9, 0xfd68fcf5, 0xfd6dfcf0, 0xfd72fcec, 0xfd76fce8, 0xfd7bfce4, 0xfd80fce1, 0xfd85fcdd, 0xfd8afcd9, 0xfd8ffcd5, 0xfd94fcd1, 0xfd99fccd, 0xfd9efcca, 0xfda3fcc6, 0xfda8fcc2, 0xfdadfcbe, 0xfdb2fcbb, 0xfdb8fcb7, 0xfdbdfcb4, 0xfdc2fcb0, 0xfdc7fcad, 0xfdccfca9, 0xfdd2fca6, 0xfdd7fca2, 0xfddcfc9f, 0xfde1fc9c, 0xfde7fc98, 0xfdecfc95, 0xfdf2fc92, 0xfdf7fc8e, 0xfdfcfc8b, 0xfe02fc88, 0xfe07fc85, 0xfe0dfc82, 0xfe12fc7f, 0xfe18fc7c, 0xfe1dfc79, 0xfe23fc76, 0xfe28fc73, 0xfe2efc70, 0xfe34fc6d, 0xfe39fc6b, 0xfe3ffc68, 0xfe45fc65, 0xfe4afc62, 0xfe50fc60, 0xfe56fc5d, 0xfe5bfc5a, 0xfe61fc58, 0xfe67fc55, 0xfe6dfc53, 0xfe72fc50, 0xfe78fc4e, 0xfe7efc4c, 0xfe84fc49, 0xfe8afc47, 0xfe8ffc45, 0xfe95fc42, 0xfe9bfc40, 0xfea1fc3e, 0xfea7fc3c, 0xfeadfc3a, 0xfeb3fc38, 0xfeb9fc36, 0xfebffc34, 0xfec5fc32, 0xfecbfc30, 0xfed1fc2e, 0xfed7fc2c, 0xfeddfc2a, 0xfee3fc29, 0xfee9fc27, 0xfeeffc25, 0xfef5fc23, 0xfefbfc22, 0xff01fc20, 0xff07fc1f, 0xff0dfc1d, 0xff13fc1c, 0xff1afc1a, 0xff20fc19, 0xff26fc18, 0xff2cfc16, 0xff32fc15, 0xff38fc14, 0xff3efc12, 0xff45fc11, 0xff4bfc10, 0xff51fc0f, 0xff57fc0e, 0xff5dfc0d, 0xff64fc0c, 0xff6afc0b, 0xff70fc0a, 0xff76fc09, 0xff7cfc08, 0xff83fc08, 0xff89fc07, 0xff8ffc06, 0xff95fc06, 0xff9cfc05, 0xffa2fc04, 0xffa8fc04, 0xffaefc03, 0xffb5fc03, 0xffbbfc02, 0xffc1fc02, 0xffc7fc02, 0xffcefc01, 0xffd4fc01, 0xffdafc01, 0xffe1fc00, 0xffe7fc00, 0xffedfc00, 0xfff3fc00, 0xfffafc00, 0x0000fc00, 0x0006fc00, 0x000dfc00, 0x0013fc00, 0x0019fc00, 0x001ffc00, 0x0026fc01, 0x002cfc01, 0x0032fc01, 0x0039fc02, 0x003ffc02, 0x0045fc02, 0x004bfc03, 0x0052fc03, 0x0058fc04, 0x005efc04, 0x0064fc05, 0x006bfc06, 0x0071fc06, 0x0077fc07, 0x007dfc08, 0x0084fc08, 0x008afc09, 0x0090fc0a, 0x0096fc0b, 0x009cfc0c, 0x00a3fc0d, 0x00a9fc0e, 0x00affc0f, 0x00b5fc10, 0x00bbfc11, 0x00c2fc12, 0x00c8fc14, 0x00cefc15, 0x00d4fc16, 0x00dafc18, 0x00e0fc19, 0x00e6fc1a, 0x00edfc1c, 0x00f3fc1d, 0x00f9fc1f, 0x00fffc20, 0x0105fc22, 0x010bfc23, 0x0111fc25, 0x0117fc27, 0x011dfc29, 0x0123fc2a, 0x0129fc2c, 0x012ffc2e, 0x0135fc30, 0x013bfc32, 0x0141fc34, 0x0147fc36, 0x014dfc38, 0x0153fc3a, 0x0159fc3c, 0x015ffc3e, 0x0165fc40, 0x016bfc42, 0x0171fc45, 0x0176fc47, 0x017cfc49, 0x0182fc4c, 0x0188fc4e, 0x018efc50, 0x0193fc53, 0x0199fc55, 0x019ffc58, 0x01a5fc5a, 0x01aafc5d, 0x01b0fc60, 0x01b6fc62, 0x01bbfc65, 0x01c1fc68, 0x01c7fc6b, 0x01ccfc6d, 0x01d2fc70, 0x01d8fc73, 0x01ddfc76, 0x01e3fc79, 0x01e8fc7c, 0x01eefc7f, 0x01f3fc82, 0x01f9fc85, 0x01fefc88, 0x0204fc8b, 0x0209fc8e, 0x020efc92, 0x0214fc95, 0x0219fc98, 0x021ffc9c, 0x0224fc9f, 0x0229fca2, 0x022efca6, 0x0234fca9, 0x0239fcad, 0x023efcb0, 0x0243fcb4, 0x0248fcb7, 0x024efcbb, 0x0253fcbe, 0x0258fcc2, 0x025dfcc6, 0x0262fcca, 0x0267fccd, 0x026cfcd1, 0x0271fcd5, 0x0276fcd9, 0x027bfcdd, 0x0280fce1, 0x0285fce4, 0x028afce8, 0x028efcec, 0x0293fcf0, 0x0298fcf5, 0x029dfcf9, 0x02a2fcfd, 0x02a6fd01, 0x02abfd05, 0x02b0fd09, 0x02b4fd0d, 0x02b9fd12, 0x02befd16, 0x02c2fd1a, 0x02c7fd1f, 0x02cbfd23, 0x02d0fd27, 0x02d4fd2c, 0x02d9fd30, 0x02ddfd35, 0x02e1fd39, 0x02e6fd3e, 0x02eafd42, 0x02eefd47, 0x02f3fd4c, 0x02f7fd50, 0x02fbfd55, 0x02fffd5a, 0x0303fd5e, 0x0307fd63, 0x030bfd68, 0x0310fd6d, 0x0314fd72, 0x0318fd76, 0x031cfd7b, 0x031ffd80, 0x0323fd85, 0x0327fd8a, 0x032bfd8f, 0x032ffd94, 0x0333fd99, 0x0336fd9e, 0x033afda3, 0x033efda8, 0x0342fdad, 0x0345fdb2, 0x0349fdb8, 0x034cfdbd, 0x0350fdc2, 0x0353fdc7, 0x0357fdcc, 0x035afdd2, 0x035efdd7, 0x0361fddc, 0x0364fde1, 0x0368fde7, 0x036bfdec, 0x036efdf2, 0x0372fdf7, 0x0375fdfc, 0x0378fe02, 0x037bfe07, 0x037efe0d, 0x0381fe12, 0x0384fe18, 0x0387fe1d, 0x038afe23, 0x038dfe28, 0x0390fe2e, 0x0393fe34, 0x0395fe39, 0x0398fe3f, 0x039bfe45, 0x039efe4a, 0x03a0fe50, 0x03a3fe56, 0x03a6fe5b, 0x03a8fe61, 0x03abfe67, 0x03adfe6d, 0x03b0fe72, 0x03b2fe78, 0x03b4fe7e, 0x03b7fe84, 0x03b9fe8a, 0x03bbfe8f, 0x03befe95, 0x03c0fe9b, 0x03c2fea1, 0x03c4fea7, 0x03c6fead, 0x03c8feb3, 0x03cafeb9, 0x03ccfebf, 0x03cefec5, 0x03d0fecb, 0x03d2fed1, 0x03d4fed7, 0x03d6fedd, 0x03d7fee3, 0x03d9fee9, 0x03dbfeef, 0x03ddfef5, 0x03defefb, 0x03e0ff01, 0x03e1ff07, 0x03e3ff0d, 0x03e4ff13, 0x03e6ff1a, 0x03e7ff20, 0x03e8ff26, 0x03eaff2c, 0x03ebff32, 0x03ecff38, 0x03eeff3e, 0x03efff45, 0x03f0ff4b, 0x03f1ff51, 0x03f2ff57, 0x03f3ff5d, 0x03f4ff64, 0x03f5ff6a, 0x03f6ff70, 0x03f7ff76, 0x03f8ff7c, 0x03f8ff83, 0x03f9ff89, 0x03faff8f, 0x03faff95, 0x03fbff9c, 0x03fcffa2, 0x03fcffa8, 0x03fdffae, 0x03fdffb5, 0x03feffbb, 0x03feffc1, 0x03feffc7, 0x03ffffce, 0x03ffffd4, 0x03ffffda, 0x0400ffe1, 0x0400ffe7, 0x0400ffed, 0x0400fff3, 0x0400fffa, 0x04000000, 0x04000006, 0x0400000d, 0x04000013, 0x04000019, 0x0400001f, 0x03ff0026, 0x03ff002c, 0x03ff0032, 0x03fe0039, 0x03fe003f, 0x03fe0045, 0x03fd004b, 0x03fd0052, 0x03fc0058, 0x03fc005e, 0x03fb0064, 0x03fa006b, 0x03fa0071, 0x03f90077, 0x03f8007d, 0x03f80084, 0x03f7008a, 0x03f60090, 0x03f50096, 0x03f4009c, 0x03f300a3, 0x03f200a9, 0x03f100af, 0x03f000b5, 0x03ef00bb, 0x03ee00c2, 0x03ec00c8, 0x03eb00ce, 0x03ea00d4, 0x03e800da, 0x03e700e0, 0x03e600e6, 0x03e400ed, 0x03e300f3, 0x03e100f9, 0x03e000ff, 0x03de0105, 0x03dd010b, 0x03db0111, 0x03d90117, 0x03d7011d, 0x03d60123, 0x03d40129, 0x03d2012f, 0x03d00135, 0x03ce013b, 0x03cc0141, 0x03ca0147, 0x03c8014d, 0x03c60153, 0x03c40159, 0x03c2015f, 0x03c00165, 0x03be016b, 0x03bb0171, 0x03b90176, 0x03b7017c, 0x03b40182, 0x03b20188, 0x03b0018e, 0x03ad0193, 0x03ab0199, 0x03a8019f, 0x03a601a5, 0x03a301aa, 0x03a001b0, 0x039e01b6, 0x039b01bb, 0x039801c1, 0x039501c7, 0x039301cc, 0x039001d2, 0x038d01d8, 0x038a01dd, 0x038701e3, 0x038401e8, 0x038101ee, 0x037e01f3, 0x037b01f9, 0x037801fe, 0x03750204, 0x03720209, 0x036e020e, 0x036b0214, 0x03680219, 0x0364021f, 0x03610224, 0x035e0229, 0x035a022e, 0x03570234, 0x03530239, 0x0350023e, 0x034c0243, 0x03490248, 0x0345024e, 0x03420253, 0x033e0258, 0x033a025d, 0x03360262, 0x03330267, 0x032f026c, 0x032b0271, 0x03270276, 0x0323027b, 0x031f0280, 0x031c0285, 0x0318028a, 0x0314028e, 0x03100293, 0x030b0298, 0x0307029d, 0x030302a2, 0x02ff02a6, 0x02fb02ab, 0x02f702b0, 0x02f302b4, 0x02ee02b9, 0x02ea02be, 0x02e602c2, 0x02e102c7, 0x02dd02cb, 0x02d902d0, 0x02d402d4, 0x02d002d9, 0x02cb02dd, 0x02c702e1, 0x02c202e6, 0x02be02ea, 0x02b902ee, 0x02b402f3, 0x02b002f7, 0x02ab02fb, 0x02a602ff, 0x02a20303, 0x029d0307, 0x0298030b, 0x02930310, 0x028e0314, 0x028a0318, 0x0285031c, 0x0280031f, 0x027b0323, 0x02760327, 0x0271032b, 0x026c032f, 0x02670333, 0x02620336, 0x025d033a, 0x0258033e, 0x02530342, 0x024e0345, 0x02480349, 0x0243034c, 0x023e0350, 0x02390353, 0x02340357, 0x022e035a, 0x0229035e, 0x02240361, 0x021f0364, 0x02190368, 0x0214036b, 0x020e036e, 0x02090372, 0x02040375, 0x01fe0378, 0x01f9037b, 0x01f3037e, 0x01ee0381, 0x01e80384, 0x01e30387, 0x01dd038a, 0x01d8038d, 0x01d20390, 0x01cc0393, 0x01c70395, 0x01c10398, 0x01bb039b, 0x01b6039e, 0x01b003a0, 0x01aa03a3, 0x01a503a6, 0x019f03a8, 0x019903ab, 0x019303ad, 0x018e03b0, 0x018803b2, 0x018203b4, 0x017c03b7, 0x017603b9, 0x017103bb, 0x016b03be, 0x016503c0, 0x015f03c2, 0x015903c4, 0x015303c6, 0x014d03c8, 0x014703ca, 0x014103cc, 0x013b03ce, 0x013503d0, 0x012f03d2, 0x012903d4, 0x012303d6, 0x011d03d7, 0x011703d9, 0x011103db, 0x010b03dd, 0x010503de, 0x00ff03e0, 0x00f903e1, 0x00f303e3, 0x00ed03e4, 0x00e603e6, 0x00e003e7, 0x00da03e8, 0x00d403ea, 0x00ce03eb, 0x00c803ec, 0x00c203ee, 0x00bb03ef, 0x00b503f0, 0x00af03f1, 0x00a903f2, 0x00a303f3, 0x009c03f4, 0x009603f5, 0x009003f6, 0x008a03f7, 0x008403f8, 0x007d03f8, 0x007703f9, 0x007103fa, 0x006b03fa, 0x006403fb, 0x005e03fc, 0x005803fc, 0x005203fd, 0x004b03fd, 0x004503fe, 0x003f03fe, 0x003903fe, 0x003203ff, 0x002c03ff, 0x002603ff, 0x001f0400, 0x00190400, 0x00130400, 0x000d0400, 0x00060400};
VMEM_SECTION unsigned int ofdm_data[1024] = {0x00000000, 0x00000001, 0x00000002, 0x00000003, 0x00000004, 0x00000005, 0x00000006, 0x00000007, 0x00000008, 0x00000009, 0x0000000a, 0x0000000b, 0x0000000c, 0x0000000d, 0x0000000e, 0x0000000f, 0x00000010, 0x00000011, 0x00000012, 0x00000013, 0x00000014, 0x00000015, 0x00000016, 0x00000017, 0x00000018, 0x00000019, 0x0000001a, 0x0000001b, 0x0000001c, 0x0000001d, 0x0000001e, 0x0000001f, 0x00000020, 0x00000021, 0x00000022, 0x00000023, 0x00000024, 0x00000025, 0x00000026, 0x00000027, 0x00000028, 0x00000029, 0x0000002a, 0x0000002b, 0x0000002c, 0x0000002d, 0x0000002e, 0x0000002f, 0x00000030, 0x00000031, 0x00000032, 0x00000033, 0x00000034, 0x00000035, 0x00000036, 0x00000037, 0x00000038, 0x00000039, 0x0000003a, 0x0000003b, 0x0000003c, 0x0000003d, 0x0000003e, 0x0000003f, 0x00000040, 0x00000041, 0x00000042, 0x00000043, 0x00000044, 0x00000045, 0x00000046, 0x00000047, 0x00000048, 0x00000049, 0x0000004a, 0x0000004b, 0x0000004c, 0x0000004d, 0x0000004e, 0x0000004f, 0x00000050, 0x00000051, 0x00000052, 0x00000053, 0x00000054, 0x00000055, 0x00000056, 0x00000057, 0x00000058, 0x00000059, 0x0000005a, 0x0000005b, 0x0000005c, 0x0000005d, 0x0000005e, 0x0000005f, 0x00000060, 0x00000061, 0x00000062, 0x00000063, 0x00000064, 0x00000065, 0x00000066, 0x00000067, 0x00000068, 0x00000069, 0x0000006a, 0x0000006b, 0x0000006c, 0x0000006d, 0x0000006e, 0x0000006f, 0x00000070, 0x00000071, 0x00000072, 0x00000073, 0x00000074, 0x00000075, 0x00000076, 0x00000077, 0x00000078, 0x00000079, 0x0000007a, 0x0000007b, 0x0000007c, 0x0000007d, 0x0000007e, 0x0000007f, 0x00000080, 0x00000081, 0x00000082, 0x00000083, 0x00000084, 0x00000085, 0x00000086, 0x00000087, 0x00000088, 0x00000089, 0x0000008a, 0x0000008b, 0x0000008c, 0x0000008d, 0x0000008e, 0x0000008f, 0x00000090, 0x00000091, 0x00000092, 0x00000093, 0x00000094, 0x00000095, 0x00000096, 0x00000097, 0x00000098, 0x00000099, 0x0000009a, 0x0000009b, 0x0000009c, 0x0000009d, 0x0000009e, 0x0000009f, 0x000000a0, 0x000000a1, 0x000000a2, 0x000000a3, 0x000000a4, 0x000000a5, 0x000000a6, 0x000000a7, 0x000000a8, 0x000000a9, 0x000000aa, 0x000000ab, 0x000000ac, 0x000000ad, 0x000000ae, 0x000000af, 0x000000b0, 0x000000b1, 0x000000b2, 0x000000b3, 0x000000b4, 0x000000b5, 0x000000b6, 0x000000b7, 0x000000b8, 0x000000b9, 0x000000ba, 0x000000bb, 0x000000bc, 0x000000bd, 0x000000be, 0x000000bf, 0x000000c0, 0x000000c1, 0x000000c2, 0x000000c3, 0x000000c4, 0x000000c5, 0x000000c6, 0x000000c7, 0x000000c8, 0x000000c9, 0x000000ca, 0x000000cb, 0x000000cc, 0x000000cd, 0x000000ce, 0x000000cf, 0x000000d0, 0x000000d1, 0x000000d2, 0x000000d3, 0x000000d4, 0x000000d5, 0x000000d6, 0x000000d7, 0x000000d8, 0x000000d9, 0x000000da, 0x000000db, 0x000000dc, 0x000000dd, 0x000000de, 0x000000df, 0x000000e0, 0x000000e1, 0x000000e2, 0x000000e3, 0x000000e4, 0x000000e5, 0x000000e6, 0x000000e7, 0x000000e8, 0x000000e9, 0x000000ea, 0x000000eb, 0x000000ec, 0x000000ed, 0x000000ee, 0x000000ef, 0x000000f0, 0x000000f1, 0x000000f2, 0x000000f3, 0x000000f4, 0x000000f5, 0x000000f6, 0x000000f7, 0x000000f8, 0x000000f9, 0x000000fa, 0x000000fb, 0x000000fc, 0x000000fd, 0x000000fe, 0x000000ff, 0x00000100, 0x00000101, 0x00000102, 0x00000103, 0x00000104, 0x00000105, 0x00000106, 0x00000107, 0x00000108, 0x00000109, 0x0000010a, 0x0000010b, 0x0000010c, 0x0000010d, 0x0000010e, 0x0000010f, 0x00000110, 0x00000111, 0x00000112, 0x00000113, 0x00000114, 0x00000115, 0x00000116, 0x00000117, 0x00000118, 0x00000119, 0x0000011a, 0x0000011b, 0x0000011c, 0x0000011d, 0x0000011e, 0x0000011f, 0x00000120, 0x00000121, 0x00000122, 0x00000123, 0x00000124, 0x00000125, 0x00000126, 0x00000127, 0x00000128, 0x00000129, 0x0000012a, 0x0000012b, 0x0000012c, 0x0000012d, 0x0000012e, 0x0000012f, 0x00000130, 0x00000131, 0x00000132, 0x00000133, 0x00000134, 0x00000135, 0x00000136, 0x00000137, 0x00000138, 0x00000139, 0x0000013a, 0x0000013b, 0x0000013c, 0x0000013d, 0x0000013e, 0x0000013f, 0x00000140, 0x00000141, 0x00000142, 0x00000143, 0x00000144, 0x00000145, 0x00000146, 0x00000147, 0x00000148, 0x00000149, 0x0000014a, 0x0000014b, 0x0000014c, 0x0000014d, 0x0000014e, 0x0000014f, 0x00000150, 0x00000151, 0x00000152, 0x00000153, 0x00000154, 0x00000155, 0x00000156, 0x00000157, 0x00000158, 0x00000159, 0x0000015a, 0x0000015b, 0x0000015c, 0x0000015d, 0x0000015e, 0x0000015f, 0x00000160, 0x00000161, 0x00000162, 0x00000163, 0x00000164, 0x00000165, 0x00000166, 0x00000167, 0x00000168, 0x00000169, 0x0000016a, 0x0000016b, 0x0000016c, 0x0000016d, 0x0000016e, 0x0000016f, 0x00000170, 0x00000171, 0x00000172, 0x00000173, 0x00000174, 0x00000175, 0x00000176, 0x00000177, 0x00000178, 0x00000179, 0x0000017a, 0x0000017b, 0x0000017c, 0x0000017d, 0x0000017e, 0x0000017f, 0x00000180, 0x00000181, 0x00000182, 0x00000183, 0x00000184, 0x00000185, 0x00000186, 0x00000187, 0x00000188, 0x00000189, 0x0000018a, 0x0000018b, 0x0000018c, 0x0000018d, 0x0000018e, 0x0000018f, 0x00000190, 0x00000191, 0x00000192, 0x00000193, 0x00000194, 0x00000195, 0x00000196, 0x00000197, 0x00000198, 0x00000199, 0x0000019a, 0x0000019b, 0x0000019c, 0x0000019d, 0x0000019e, 0x0000019f, 0x000001a0, 0x000001a1, 0x000001a2, 0x000001a3, 0x000001a4, 0x000001a5, 0x000001a6, 0x000001a7, 0x000001a8, 0x000001a9, 0x000001aa, 0x000001ab, 0x000001ac, 0x000001ad, 0x000001ae, 0x000001af, 0x000001b0, 0x000001b1, 0x000001b2, 0x000001b3, 0x000001b4, 0x000001b5, 0x000001b6, 0x000001b7, 0x000001b8, 0x000001b9, 0x000001ba, 0x000001bb, 0x000001bc, 0x000001bd, 0x000001be, 0x000001bf, 0x000001c0, 0x000001c1, 0x000001c2, 0x000001c3, 0x000001c4, 0x000001c5, 0x000001c6, 0x000001c7, 0x000001c8, 0x000001c9, 0x000001ca, 0x000001cb, 0x000001cc, 0x000001cd, 0x000001ce, 0x000001cf, 0x000001d0, 0x000001d1, 0x000001d2, 0x000001d3, 0x000001d4, 0x000001d5, 0x000001d6, 0x000001d7, 0x000001d8, 0x000001d9, 0x000001da, 0x000001db, 0x000001dc, 0x000001dd, 0x000001de, 0x000001df, 0x000001e0, 0x000001e1, 0x000001e2, 0x000001e3, 0x000001e4, 0x000001e5, 0x000001e6, 0x000001e7, 0x000001e8, 0x000001e9, 0x000001ea, 0x000001eb, 0x000001ec, 0x000001ed, 0x000001ee, 0x000001ef, 0x000001f0, 0x000001f1, 0x000001f2, 0x000001f3, 0x000001f4, 0x000001f5, 0x000001f6, 0x000001f7, 0x000001f8, 0x000001f9, 0x000001fa, 0x000001fb, 0x000001fc, 0x000001fd, 0x000001fe, 0x000001ff, 0x00000200, 0x00000201, 0x00000202, 0x00000203, 0x00000204, 0x00000205, 0x00000206, 0x00000207, 0x00000208, 0x00000209, 0x0000020a, 0x0000020b, 0x0000020c, 0x0000020d, 0x0000020e, 0x0000020f, 0x00000210, 0x00000211, 0x00000212, 0x00000213, 0x00000214, 0x00000215, 0x00000216, 0x00000217, 0x00000218, 0x00000219, 0x0000021a, 0x0000021b, 0x0000021c, 0x0000021d, 0x0000021e, 0x0000021f, 0x00000220, 0x00000221, 0x00000222, 0x00000223, 0x00000224, 0x00000225, 0x00000226, 0x00000227, 0x00000228, 0x00000229, 0x0000022a, 0x0000022b, 0x0000022c, 0x0000022d, 0x0000022e, 0x0000022f, 0x00000230, 0x00000231, 0x00000232, 0x00000233, 0x00000234, 0x00000235, 0x00000236, 0x00000237, 0x00000238, 0x00000239, 0x0000023a, 0x0000023b, 0x0000023c, 0x0000023d, 0x0000023e, 0x0000023f, 0x00000240, 0x00000241, 0x00000242, 0x00000243, 0x00000244, 0x00000245, 0x00000246, 0x00000247, 0x00000248, 0x00000249, 0x0000024a, 0x0000024b, 0x0000024c, 0x0000024d, 0x0000024e, 0x0000024f, 0x00000250, 0x00000251, 0x00000252, 0x00000253, 0x00000254, 0x00000255, 0x00000256, 0x00000257, 0x00000258, 0x00000259, 0x0000025a, 0x0000025b, 0x0000025c, 0x0000025d, 0x0000025e, 0x0000025f, 0x00000260, 0x00000261, 0x00000262, 0x00000263, 0x00000264, 0x00000265, 0x00000266, 0x00000267, 0x00000268, 0x00000269, 0x0000026a, 0x0000026b, 0x0000026c, 0x0000026d, 0x0000026e, 0x0000026f, 0x00000270, 0x00000271, 0x00000272, 0x00000273, 0x00000274, 0x00000275, 0x00000276, 0x00000277, 0x00000278, 0x00000279, 0x0000027a, 0x0000027b, 0x0000027c, 0x0000027d, 0x0000027e, 0x0000027f, 0x00000280, 0x00000281, 0x00000282, 0x00000283, 0x00000284, 0x00000285, 0x00000286, 0x00000287, 0x00000288, 0x00000289, 0x0000028a, 0x0000028b, 0x0000028c, 0x0000028d, 0x0000028e, 0x0000028f, 0x00000290, 0x00000291, 0x00000292, 0x00000293, 0x00000294, 0x00000295, 0x00000296, 0x00000297, 0x00000298, 0x00000299, 0x0000029a, 0x0000029b, 0x0000029c, 0x0000029d, 0x0000029e, 0x0000029f, 0x000002a0, 0x000002a1, 0x000002a2, 0x000002a3, 0x000002a4, 0x000002a5, 0x000002a6, 0x000002a7, 0x000002a8, 0x000002a9, 0x000002aa, 0x000002ab, 0x000002ac, 0x000002ad, 0x000002ae, 0x000002af, 0x000002b0, 0x000002b1, 0x000002b2, 0x000002b3, 0x000002b4, 0x000002b5, 0x000002b6, 0x000002b7, 0x000002b8, 0x000002b9, 0x000002ba, 0x000002bb, 0x000002bc, 0x000002bd, 0x000002be, 0x000002bf, 0x000002c0, 0x000002c1, 0x000002c2, 0x000002c3, 0x000002c4, 0x000002c5, 0x000002c6, 0x000002c7, 0x000002c8, 0x000002c9, 0x000002ca, 0x000002cb, 0x000002cc, 0x000002cd, 0x000002ce, 0x000002cf, 0x000002d0, 0x000002d1, 0x000002d2, 0x000002d3, 0x000002d4, 0x000002d5, 0x000002d6, 0x000002d7, 0x000002d8, 0x000002d9, 0x000002da, 0x000002db, 0x000002dc, 0x000002dd, 0x000002de, 0x000002df, 0x000002e0, 0x000002e1, 0x000002e2, 0x000002e3, 0x000002e4, 0x000002e5, 0x000002e6, 0x000002e7, 0x000002e8, 0x000002e9, 0x000002ea, 0x000002eb, 0x000002ec, 0x000002ed, 0x000002ee, 0x000002ef, 0x000002f0, 0x000002f1, 0x000002f2, 0x000002f3, 0x000002f4, 0x000002f5, 0x000002f6, 0x000002f7, 0x000002f8, 0x000002f9, 0x000002fa, 0x000002fb, 0x000002fc, 0x000002fd, 0x000002fe, 0x000002ff, 0x00000300, 0x00000301, 0x00000302, 0x00000303, 0x00000304, 0x00000305, 0x00000306, 0x00000307, 0x00000308, 0x00000309, 0x0000030a, 0x0000030b, 0x0000030c, 0x0000030d, 0x0000030e, 0x0000030f, 0x00000310, 0x00000311, 0x00000312, 0x00000313, 0x00000314, 0x00000315, 0x00000316, 0x00000317, 0x00000318, 0x00000319, 0x0000031a, 0x0000031b, 0x0000031c, 0x0000031d, 0x0000031e, 0x0000031f, 0x00000320, 0x00000321, 0x00000322, 0x00000323, 0x00000324, 0x00000325, 0x00000326, 0x00000327, 0x00000328, 0x00000329, 0x0000032a, 0x0000032b, 0x0000032c, 0x0000032d, 0x0000032e, 0x0000032f, 0x00000330, 0x00000331, 0x00000332, 0x00000333, 0x00000334, 0x00000335, 0x00000336, 0x00000337, 0x00000338, 0x00000339, 0x0000033a, 0x0000033b, 0x0000033c, 0x0000033d, 0x0000033e, 0x0000033f, 0x00000340, 0x00000341, 0x00000342, 0x00000343, 0x00000344, 0x00000345, 0x00000346, 0x00000347, 0x00000348, 0x00000349, 0x0000034a, 0x0000034b, 0x0000034c, 0x0000034d, 0x0000034e, 0x0000034f, 0x00000350, 0x00000351, 0x00000352, 0x00000353, 0x00000354, 0x00000355, 0x00000356, 0x00000357, 0x00000358, 0x00000359, 0x0000035a, 0x0000035b, 0x0000035c, 0x0000035d, 0x0000035e, 0x0000035f, 0x00000360, 0x00000361, 0x00000362, 0x00000363, 0x00000364, 0x00000365, 0x00000366, 0x00000367, 0x00000368, 0x00000369, 0x0000036a, 0x0000036b, 0x0000036c, 0x0000036d, 0x0000036e, 0x0000036f, 0x00000370, 0x00000371, 0x00000372, 0x00000373, 0x00000374, 0x00000375, 0x00000376, 0x00000377, 0x00000378, 0x00000379, 0x0000037a, 0x0000037b, 0x0000037c, 0x0000037d, 0x0000037e, 0x0000037f, 0x00000380, 0x00000381, 0x00000382, 0x00000383, 0x00000384, 0x00000385, 0x00000386, 0x00000387, 0x00000388, 0x00000389, 0x0000038a, 0x0000038b, 0x0000038c, 0x0000038d, 0x0000038e, 0x0000038f, 0x00000390, 0x00000391, 0x00000392, 0x00000393, 0x00000394, 0x00000395, 0x00000396, 0x00000397, 0x00000398, 0x00000399, 0x0000039a, 0x0000039b, 0x0000039c, 0x0000039d, 0x0000039e, 0x0000039f, 0x000003a0, 0x000003a1, 0x000003a2, 0x000003a3, 0x000003a4, 0x000003a5, 0x000003a6, 0x000003a7, 0x000003a8, 0x000003a9, 0x000003aa, 0x000003ab, 0x000003ac, 0x000003ad, 0x000003ae, 0x000003af, 0x000003b0, 0x000003b1, 0x000003b2, 0x000003b3, 0x000003b4, 0x000003b5, 0x000003b6, 0x000003b7, 0x000003b8, 0x000003b9, 0x000003ba, 0x000003bb, 0x000003bc, 0x000003bd, 0x000003be, 0x000003bf, 0x000003c0, 0x000003c1, 0x000003c2, 0x000003c3, 0x000003c4, 0x000003c5, 0x000003c6, 0x000003c7, 0x000003c8, 0x000003c9, 0x000003ca, 0x000003cb, 0x000003cc, 0x000003cd, 0x000003ce, 0x000003cf, 0x000003d0, 0x000003d1, 0x000003d2, 0x000003d3, 0x000003d4, 0x000003d5, 0x000003d6, 0x000003d7, 0x000003d8, 0x000003d9, 0x000003da, 0x000003db, 0x000003dc, 0x000003dd, 0x000003de, 0x000003df, 0x000003e0, 0x000003e1, 0x000003e2, 0x000003e3, 0x000003e4, 0x000003e5, 0x000003e6, 0x000003e7, 0x000003e8, 0x000003e9, 0x000003ea, 0x000003eb, 0x000003ec, 0x000003ed, 0x000003ee, 0x000003ef, 0x000003f0, 0x000003f1, 0x000003f2, 0x000003f3, 0x000003f4, 0x000003f5, 0x000003f6, 0x000003f7, 0x000003f8, 0x000003f9, 0x000003fa, 0x000003fb, 0x000003fc, 0x000003fd, 0x000003fe, 0x000003ff};
VMEM_SECTION unsigned int benchmark[16] = {0x145dfff0};
VMEM_SECTION unsigned int output_0[1024] = {0};
VMEM_SECTION unsigned int output_1[256] = {0};
VMEM_SECTION unsigned int output_2[64] = {0};

// 



void xbb_coarse_sync()
{
   int exp_data_location=VMEM_ADDRESS(exp_data);
   int ofdm_data_location=VMEM_ADDRESS(ofdm_data);
   int benchmark_location=VMEM_ADDRESS(benchmark);
   int all_one_location=VMEM_ADDRESS(all_one);

   int bank_address_location_1 = VMEM_ADDRESS(bank_address_1);


   int output_location_0 = VMEM_ADDRESS(output_0);
   int output_location_1 = VMEM_ADDRESS(output_1);
   int output_location_2 = VMEM_ADDRESS(output_2);


   unsigned int start_clk, end_clk;
   CSR_READ(TIMER_VALUE, start_clk);

   /// stage 0
   int cfg_location = VMEM_ADDRESS(config_word_cmul_rx4_0f);
   MVXV_KNOP(V0, cfg_location);
   VNOP_LK14(V0);

   MVXV_KNOP(V1, exp_data_location);
   MVXV_KNOP(V2, ofdm_data_location);
   MVXV_KNOP(V3, output_location_0);
   MVXV_KNOP(V4, 1);

   MVXV_KNOP(V5, 1-(1<<12));
   MVXV_KNOP(V6, 4<<12);
   
   for(int index=0; index<64; index++)
   {
    ADD_LK8(V1, V1, V4, 0);
    ADD_LK9(V2, V2, V4, 0);
    ADD_SK1(V3, V3, V5, 0);

    if(index%4==3)
    {
      ADD_KNOP(V3, V3, V6, 0);
    }
   }

   ///stage 1
   cfg_location = VMEM_ADDRESS(config_word_cmul_rx4_0f);
   MVXV_KNOP(V0, cfg_location);
   VNOP_LK14(V0);

   MVXV_KNOP(V1, all_one_location);
   MVXV_KNOP(V2, output_location_0);
   MVXV_KNOP(V3, output_location_1);
   MVXV_KNOP(V4, 1);
   MVXV_KNOP(V8, 4);

   MVXV_KNOP(V5, 1-(1<<12));
   MVXV_KNOP(V6, 4<<12);
   
   MVXV_KNOP(V7, bank_address_location_1);
   VNOP_LK15(V7);
   MVK15V_KNOP(V7,0);
   ADD_KNOP(V2, V2, V7, 0);
   
   for(int index=0; index<16; index++)
   {
    VNOP_LK8(V1);
    ADD_LK9(V2, V2, V8, 0);
    ADD_SK1(V3, V3, V5, 0);
    if(index%4==3)
    {
      ADD_KNOP(V3, V3, V6, 0);
    }

   }

   ///stage 2
   cfg_location = VMEM_ADDRESS(config_word_cmul_rx4_0f);
   MVXV_KNOP(V0, cfg_location);
   VNOP_LK14(V0);

   MVXV_KNOP(V1, all_one_location);
   MVXV_KNOP(V2, output_location_1);
   MVXV_KNOP(V3, output_location_2);
   MVXV_KNOP(V4, 1);
   MVXV_KNOP(V8, 4);

   MVXV_KNOP(V5, 1-(1<<12));
   MVXV_KNOP(V6, 4<<12);
   
   MVXV_KNOP(V7, bank_address_location_1);
   VNOP_LK15(V7);
   MVK15V_KNOP(V7,0);
   ADD_KNOP(V2, V2, V7, 0);
   
   for(int index=0; index<4; index++)
   {
    VNOP_LK8(V1);
    ADD_LK9(V2, V2, V8, 0);
    ADD_SK1(V3, V3, V5, 0);
    if(index%4==3)
    {
      ADD_KNOP(V3, V3, V6, 0);
    }

   }

   ///stage 3
   cfg_location = VMEM_ADDRESS(config_word_cmul_rx4_0f);
   MVXV_KNOP(V0, cfg_location);
   VNOP_LK14(V0);

   MVXV_KNOP(V1, all_one_location);
   MVXV_KNOP(V2, output_location_1);
   MVXV_KNOP(V3, output_location_2);
   MVXV_KNOP(V4, 1);
   MVXV_KNOP(V8, 4);

   MVXV_KNOP(V5, 1-(1<<12));
   MVXV_KNOP(V6, 4<<12);
   
   MVXV_KNOP(V7, bank_address_location_1);
   VNOP_LK15(V7);
   MVK15V_KNOP(V7,0);
   ADD_KNOP(V2, V2, V7, 0);
   
   for(int index=0; index<1; index++)
   {
    VNOP_LK8(V1);
    ADD_LK9(V2, V2, V8, 0);
    ADD_SK1(V3, V3, V5, 0);
    if(index%4==3)
    {
      ADD_KNOP(V3, V3, V6, 0);
    }

   }
   


   CSR_READ(TIMER_VALUE, end_clk);


   

   // *pass_fail_0=0x00000000;
   // int flag    = result_check(benchmark_location, output_location_2, 1, 1);
  
   // if(flag==1)
   //  *pass_fail_0=0xffffffff;


    *pass_fail_1 = end_clk-start_clk;

  


}




void data_show(int start_address, int num_data)
{
  register volatile unsigned int x3 asm("x3");
  x3=0xdeaddead;
  for(int index=0; index<num_data;index++)
  {
    x3=index;
    x3=vector_memory[start_address*16+index];
  }
  x3=0xbeefbeef;
  
}


int result_check(int benchmark_start_row, int result_start_row, int total_sample, int diff_th)
{
  register volatile unsigned int x3 asm("x3");
  int result0, result1;
  int diff_imag, diff_real;
  // int diff_th = 10;
  int flag=1;

  x3=0x77777777;

  for(int index=0; index<total_sample;index++)
  {
    
    result0=vector_memory[benchmark_start_row*16+index];
    STALL(10);
    *pass_fail_0=benchmark_start_row*16+index;

    result1=vector_memory[result_start_row*16+index];
    STALL(10);
    *pass_fail_1=result_start_row*16+index;


    diff_real=(result0&0x0000ffff) - (result1&0x0000ffff);

    if((diff_real&0x00008000) == 0x8000)
      diff_real=diff_real | 0xffff0000;

    diff_imag=((result0>>16)&0x0000ffff) - ((result1>>16)&0x0000ffff);
     
    if((diff_imag&0x00008000) == 0x8000)
      diff_imag=diff_imag | 0xffff0000;

    if((diff_real<diff_th)&&(diff_real>diff_th*(-1)))
      diff_real=0;

    if((diff_imag<diff_th)&&(diff_imag>diff_th*(-1)))
      diff_imag=0;
    
    x3=diff_real;
    x3=diff_imag;


    if((diff_real!=0)||(diff_imag!=0))
    {
      x3=index;
      x3=result0;
      x3=result1;
      flag=0;
      break;
    }
  }
  x3=0x88888888;
  x3=flag;
  return flag;
}

void LoadVREGS(){
  MVXV_KNOP(V0,1);
  MVXV_KNOP(V1,2);
  MVXV_KNOP(V2,4);
  MVXV_KNOP(V3,8);
  MVXV_KNOP(V4,16);
  MVXV_KNOP(V5,32);
  MVXV_KNOP(V6,64);
  MVXV_KNOP(V7,128);
  MVXV_KNOP(V8,256);
  MVXV_KNOP(V9,512);
  MVXV_KNOP(V10,1024);
  MVXV_KNOP(V11,2048);
  MVXV_KNOP(V12,4096);
  MVXV_KNOP(V13,8192);
  MVXV_KNOP(V14,16384);
  MVXV_KNOP(V15,16384*2);
}

void MVVK15Test(){
  MVVK15_KNOP(V2);

  for (int i=0; i<3;i++) {
    VNOP_SK15(V1);
    VNOP_LK15(V1);
  }
  
  MVK15V_KNOP(V0,0);
  ADD_KNOP(V0,V2,V3,0);
  MVVK15_KNOP(V0);
  MVVK15_KNOP(V4);
  MVVK15_KNOP(V5);
  //  MVVK15_KNOP(V6);
  // MVVK15_KNOP(V7);

  MVK15V_KNOP(V15,0);
  MVK15V_KNOP(V0,0);
  //  MVK15V_KNOP(V15,0);
  
}

void MVK15VTest(){
}

void SK15Test(){
}
void LK15Test(){
}

void wait(int t){
  for(int i=0;i<t;i++)
    STALL(10);
}

void K13Test(){
  //  VNOP_LK13(V0);
  //  VNOP_SK13(V1);
  
  VNOP_LK13(V1);
  VNOP_SK13(V2);
  VNOP_LK13(V2);
  VNOP_SK13(V3);
  VNOP_LK13(V3);
  VNOP_SK13(V4);
  VNOP_LK13(V4);
  VNOP_SK13(V5);
  VNOP_LK13(V5);
  VNOP_SK13(V6);
  VNOP_LK13(V6);
  
  VNOP_LK15(V6);
  MVK15V_KNOP(V15,0);
  
}

//int main_v1024_new_perm_O3_v23(void)
int main()
{

  //xbb_coarse_sync();
  LoadVREGS();
  wait(10);
  MVVK15Test();
  wait(10);
  K13Test();
  //mvvk15_test();
  //mvk15v_test();
  

  return 0;
}
